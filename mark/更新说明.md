# 芯片印字标记生成器 - 更新说明

## 新增功能

### 1. 字体文件支持
- 添加了本地 OCR-A 字体文件支持（OcrA-Regular.ttf）
- 即使用户电脑没有安装 OCR-A 字体也能正常使用

### 2. 封装类型快速选择
- 新增封装类型下拉菜单
- 包含 50+ 种常见封装类型（QFN、LQFP、BGA等）
- 选择封装后自动设置：
  - 芯片宽度和高度
  - 推荐的字宽、字高、字间距
- 显示当前封装的参数提示

### 3. GigaDevice Logo 快速添加
- 一键添加 GigaDevice 官方 Logo
- 点击"+ GigaDevice Logo"按钮即可
- Logo 会自动应用印字颜色

### 4. 自定义 Logo 上传增强
- 支持更多图片格式（不仅限于 PNG）
- 上传的 Logo 自动转换为印字颜色

### 5. 字宽和字间距补偿逻辑
- **字宽补偿**：实际渲染宽度 = 设定值 × 1.3
- **字间距补偿**：实际间距 = 设定值 - 字宽 × 0.3
- 这样可以抵消字符自带的空白，让字符更紧凑

## 使用方法

### 快速开始
1. 打开 index.html
2. 在"封装类型"下拉菜单中选择你的芯片封装（如"QFN24 3x3mm"）
3. 系统自动设置芯片尺寸和推荐字体参数
4. 点击"+ 添加行"添加文字，使用推荐参数
5. 点击"+ GigaDevice Logo"添加 Logo（可选）
6. 拖动调整位置
7. 点击"💾 保存模板"导出

### 文件要求
确保以下文件在同一目录：
- index.html
- script.js
- style.css
- package-configs.js（封装配置）
- OcrA-Regular.ttf（OCR-A 字体文件）
- Gigadevice.png（GigaDevice Logo 文件）
- 工作簿1.csv（封装数据，可选）

## 技术细节

### 补偿逻辑说明
由于字体自带空白，直接设置的字宽和字间距与实际效果有偏差：
- 字符实际内容宽度 ≈ 设定字宽 × 0.77
- 字符左右空白 ≈ 设定字宽 × 0.23

因此采用补偿策略：
- 渲染字宽 = 设定值 × 1.3（让字符内容占满设定宽度）
- 渲染间距 = 设定值 - 字宽 × 0.3（抵消字符自带空白）

### 封装配置格式
CSV 格式：`封装名称 尺寸,字宽,字高,字间距`
例如：`QFN24 3x3mm,0.3,0.4,0.07`

## 注意事项
- 首次使用需要等待字体加载完成
- 建议使用 Chrome 或 Edge 浏览器以获得最佳体验
- 保存模板时会弹出"另存为"对话框（现代浏览器）
